# codeCompress
利用python给项目的js、css资源加版本号，并压缩

项目开发环境win7,python3.5.2,nodejs8.8.1

压缩部分用到的nodejs插件spt(请自行安装):https://github.com/fouber/spt

项目适用场景：老代码，未采用任何构建工具，只需要自动更新静态资源版本号，以及压缩css和js资源文件（图片由于spt不支持高版本的nodejs，所以无法压缩图片）！

使用说明：由于项目的整体思路是在不影响所有开发流程的前提下，只在发版那一步做处理，所以采用了新增一个发布用的release分支，当前这个分支需要手动建好。
处理思路：
1、首先，获取需要处理的项目的路径，遍历项目内的所有目录，找到以html和tpl(php一种模版引擎的后缀，用不到可以忽略)为后缀的，读取对应文件内的静态资源（网络资源的不做处理），根据其
   md5的值来得到版本号；
2、从远端clone下来指定代码，然后切换到release分支，将release分支内的除了git相关的信息删掉，然后将添加会得到版本号的代码利用spt压缩并同步到release文件内，
   提交，删除clone下来的文件夹，完成所有操作！
   
   
备注：相关描述可能不太清晰，或不容易理解，直接看代码就可以！



